{% extends "ProyectoWebApp/base.html" %}
{% load static %}
{% load custom_tags %}

{% block content %}
<div class="container mt-5" style = "margin-bottom: 30px;">
    <div class="card shadow-lg p-5" style="background-color: rgba(59, 66, 65, 0.8); border-radius: 15px; box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3); color: #ffffff;">
        <h2 class="text-center mb-5" style="text-transform: uppercase; letter-spacing: 2px; font-weight: bold;">Editar Vivienda</h2>
        
        <form method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
            {% csrf_token %}
            
            <!-- Nombre de la vivienda -->
            <div class="mb-4">
                <label for="nombre" style="color: #dddddd; font-weight: bold;">Nombre:</label>
                {{ form.nombre|add_class:"form-control" }}
            </div>

            <!-- Descripción de la vivienda -->
            <div class="mb-4">
                <label for="descripcion" style="color: #dddddd; font-weight: bold;">Descripción:</label>
                {{ form.descripcion|add_class:"form-control" }}
            </div>

            <!-- Ubicación de la vivienda -->
            <div class="mb-4">
                <label for="ubicacion" style="color: #dddddd; font-weight: bold;">Ubicación:</label>
                {{ form.ubicacion|add_class:"form-control" }}
            </div>

            <!-- Imagen -->
            <div class="mb-4">
                <label style="color: #dddddd; font-weight: bold;">Imagen actual:</label>
                {% if vivienda.imagen %}
                    <div class="text-center mb-3">
                        <img src="{{ vivienda.imagen.url }}" alt="{{ vivienda.nombre }}" style="border-radius: 10px; max-height: 250px; margin-bottom: 15px;">
                    </div>
                {% endif %}
                <label for="imagen" style="color: #dddddd; font-weight: bold;">Subir nueva imagen:</label>
                {{ form.imagen|add_class:"form-control" }}
            </div>

            <!-- Disponibilidad -->
            <div class="form-check mb-4">
                {{ form.disponibilidad|add_class:"form-check-input" }}
                <label for="disponibilidad" style="color: #dddddd; font-weight: bold;" class="form-check-label">Disponibilidad</label>
            </div>

            <!-- Fechas de disponibilidad -->
            <div class="row">
                <div class="col-md-6 mb-4">
                    <label for="fecha_disponible_desde" style="color: #dddddd; font-weight: bold;">Fecha disponible desde:</label>
                    <input 
                        type="date" 
                        id="fecha_disponible_desde" 
                        name="fecha_disponible_desde" 
                        class="form-control" 
                        value="{{ form.initial.fecha_disponible_desde|date:'Y-m-d' }}"
                    >
                </div>
                <div class="col-md-6 mb-4">
                    <label for="fecha_disponible_hasta" style="color: #dddddd; font-weight: bold;">Fecha disponible hasta:</label>
                    <input 
                        type="date" 
                        id="fecha_disponible_hasta" 
                        name="fecha_disponible_hasta" 
                        class="form-control" 
                        value="{{ form.initial.fecha_disponible_hasta|date:'Y-m-d' }}"
                    >
                </div>
            </div>        

            <!-- Precio por día -->
            <div class="mb-4">
                <label for="precio_por_dia" style="color: #dddddd; font-weight: bold;">Precio por día:</label>
                {{ form.precio_por_dia|add_class:"form-control" }}
            </div>

            <!-- Botones -->
            <div class="text-center mt-5">
                <button type="submit" style="background-color: #5dade2; border-color: #5dade2; color: #ffffff; padding: 10px 20px; border-radius: 8px; text-transform: uppercase; font-weight: bold; transition: background-color 0.3s; margin-right: 10px;">
                    Guardar cambios
                </button>
                <a href="{% url 'catalogo_viviendas_propietario' %}" style="background-color: #6c757d; border-color: #6c757d; color: #ffffff; padding: 10px 20px; border-radius: 8px; text-transform: uppercase; font-weight: bold; transition: background-color 0.3s;">
                    Volver
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}